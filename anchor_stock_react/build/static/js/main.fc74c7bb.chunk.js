(this.webpackJsonpanchor_stock_react=this.webpackJsonpanchor_stock_react||[]).push([[0],{20:function(e,t,n){e.exports=n(31)},25:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(12),c=n.n(o),l=(n(25),n(1)),s=n(2),i=n(5),u=n(3),p=n(6),m=n(4),h=n(10),b=n(7),d=function(e){return function(t,n){var r=Object(b.a)({},e,{userId:n().currentUser.id});return fetch("frozen-ravine-06122.herokuapp.com/api/v1/buyStock",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(r)}).then((function(e){return e.json()})).then((function(e){e.errors?alert(e.errors):(t(j({newStock:e.newStock,newUserMoneyAmount:e.userData.money_amount})),t(f(e.userData.stocks)))}))}},f=function(e){return function(t){for(var n={},r=0;r<e.length;r++)void 0===n[e[r].symbol]?n[e[r].symbol]=e[r].amount:n[e[r].symbol]+=e[r].amount;var a=Object.keys(n).join(",");return fetch("https://cloud.iexapis.com/stable/stock/market/batch?symbols=".concat(a,"&types=quote&token=").concat("pk_6efd2ab4b76a447f8d122b7f9dd4618b"),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return Promise.all([e.json(),n])})).then((function(e){for(var r={},a=0,o=0;o<Object.keys(e[0]).length;o++){var c=Object.entries(e[0])[o][1].quote.latestPrice,l=Object.entries(e[0])[o][1].quote.open,s=Object.entries(e[0])[o][0],i=(Math.round(Object.entries(e[0])[o][1].quote.latestPrice*Object.entries(n)[o][1]*100)/100).toFixed(2),u=Object.entries(n)[o][1],p="";a+=parseFloat(i),p=c>l?"greenText":c<l?"redText":"greyText",r[o]={symbol:s,totalPrice:i,amount:u,stockTextColor:p}}t(O({portfolioStocks:r,portfolioPrice:(Math.round(100*a)/100).toFixed(2)}))}))}},y=function(e){return{type:"LOGIN_USER",payload:e}},O=function(e){return{type:"FILL_PORTFOLIO_STOCKS",payload:e}},j=function(e){return{type:"ADD_STOCK_TO_USER",payload:e}},k=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={username:"",email:"",password:"",currAccView:"loginAcc"},n.handleChange=function(e){n.setState(Object(h.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){e.preventDefault();var t={};"Register an account"===document.getElementById("formButtonView").value?(t={email:n.state.email,password:n.state.password},n.props.userLoginFetch(t)):(t={username:n.state.username,email:n.state.email,password:n.state.password},n.props.userCreateFetch(t))},n.handleClick=function(){"createAcc"===n.state.currAccView?n.setState({currAccView:"loginAcc"}):n.setState({currAccView:"createAcc"})},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"centerColumn centerScreen accountBorder"},"createAcc"===this.state.currAccView?a.a.createElement("p",null,"Register"):a.a.createElement("p",null,"Login"),a.a.createElement("form",{className:"centerColumn",id:"accountForm",onSubmit:this.handleSubmit},"createAcc"===this.state.currAccView?a.a.createElement("div",null,a.a.createElement("label",null,"Username: "),a.a.createElement("input",{type:"text",name:"username",placeholder:"Username",onChange:this.handleChange})):null,a.a.createElement("div",null,a.a.createElement("label",null,"Email: "),a.a.createElement("input",{type:"email",name:"email",placeholder:"Email",onChange:this.handleChange})),a.a.createElement("div",null,a.a.createElement("label",null,"Password: "),a.a.createElement("input",{type:"password",name:"password",placeholder:"Password",onChange:this.handleChange})),a.a.createElement("div",null,a.a.createElement("input",{type:"submit",name:"submit",value:"Submit"}),a.a.createElement("input",{type:"button",name:"button",value:"createAcc"===this.state.currAccView?"I have an account":"Register an account",id:"formButtonView",onClick:this.handleClick}))))}}]),t}(a.a.PureComponent),E=Object(m.b)(null,(function(e){return{userCreateFetch:function(t){return e(function(e){return function(t){return fetch("frozen-ravine-06122.herokuapp.com/api/v1/users",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){e.errors?alert(e.errors):t(y(e.user))}))}}(t))},userLoginFetch:function(t){return e(function(e){return function(t){return fetch("frozen-ravine-06122.herokuapp.com/api/v1/login",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){e.errors?alert(e.errors):t(y(e.user))}))}}(t))}}}))(k),v=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).componentDidMount=function(){n.props.currentUser.stocks.length>0&&(n.props.getStockBatchFetch(n.props.currentUser.stocks),n.startStockInterval())},n.componentDidUpdate=function(e){e.currentUser.stocks.length>0&&void 0===n.stockInterval&&n.startStockInterval()},n.componentWillUnmount=function(){clearInterval(n.stockInterval)},n.state={symbolSearch:"",symbolAmount:0},n.startStockInterval=function(){return n.stockInterval=setInterval((function(){return n.props.getStockBatchFetch(n.props.currentUser.stocks)}),18e4)},n.handleChange=function(e){n.setState(Object(h.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){if(e.preventDefault(),0===n.state.symbolAmount||n.state.symbolAmount<=0)alert("Must have a quantity more then zero.");else{var t=Object(b.a)({},n.state);n.props.getStockFetch(t)}},n.renderPortfolio=function(e){return Object.values(e).map((function(e,t){return a.a.createElement("tr",{key:t},a.a.createElement("td",null,a.a.createElement("span",{className:e.stockTextColor},e.symbol)," - ",e.amount," Shares"),a.a.createElement("td",{className:e.stockTextColor},"$",e.totalPrice))}))},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"centerRowTable"},a.a.createElement("div",{className:"centerColumn tableAlignLeft"},0===this.props.currentUser.stocks.length?a.a.createElement("p",null,"No stocks in portfolio."):a.a.createElement("div",null,a.a.createElement("table",null,a.a.createElement("thead",null,"Portfolio ($",this.props.portfolioPrice,")"),a.a.createElement("tbody",null,0===Object.keys(this.props.portfolioStocks).length?null:this.renderPortfolio(this.props.portfolioStocks))))),a.a.createElement("div",{className:"centerColumn formAlignCenter"},a.a.createElement("p",null,"Cash: $",this.props.currentUser.money_amount.toFixed(2)),a.a.createElement("form",{onSubmit:this.handleSubmit},a.a.createElement("div",null,a.a.createElement("label",null,"Ticker: "),a.a.createElement("input",{type:"text",name:"symbolSearch",placeholder:"Ticker",onChange:this.handleChange})),a.a.createElement("div",null,a.a.createElement("label",null,"Qty: "),a.a.createElement("input",{type:"number",name:"symbolAmount",placeholder:"Qty",onChange:this.handleChange})),a.a.createElement("input",{type:"submit",name:"submit",value:"Buy"}))))}}]),t}(a.a.PureComponent),S=Object(m.b)((function(e){return{currentUser:e.currentUser,portfolioStocks:e.portfolioStocks,portfolioPrice:e.portfolioPrice}}),(function(e){return{getStockFetch:function(t){return e(function(e){return function(t){return fetch("https://cloud.iexapis.com/stable/stock/".concat(e.symbolSearch,"/quote?token=").concat("pk_6efd2ab4b76a447f8d122b7f9dd4618b"),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(t){return!1===t.ok?404===t.status?alert("Stock symbol not valid."):alert("Error"):Promise.all([t.json(),e])})).then((function(e){t(d({stockPrice:e[0].latestPrice,stockSymbol:e[0].symbol,stockAmount:e[1].symbolAmount}))})).catch((function(){console.log("Error")}))}}(t))},getStockBatchFetch:function(t){return e(f(t))}}}))(v),g=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"centerColumn tableAlignLeft"},0===this.props.currentUser.stocks.length?a.a.createElement("p",null,"No transaction history."):a.a.createElement("table",null,a.a.createElement("thead",null,"Transactions"),a.a.createElement("tbody",null,this.props.currentUser.stocks.map((function(e,t){return a.a.createElement("tr",{key:t},a.a.createElement("td",null,"BUY (",e.symbol,") - ",e.amount," Shares @ $",e.price))})))))}}]),t}(a.a.PureComponent),C=Object(m.b)((function(e){return{currentUser:e.currentUser}}),null)(g),w=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){switch(this.props.bodyView){case"portfolio":return a.a.createElement(S,null);case"transactions":return a.a.createElement(C,null);default:return a.a.createElement(E,null)}}}]),t}(r.Component),A=Object(m.b)((function(e){return{bodyView:e.bodyView}}),null)(w),U=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).handleClick=function(e){"portfolio"===e.target.name&&e.target.name!==n.props.bodyView?n.props.handleScreenSwitch("portfolio"):"transactions"===e.target.name&&e.target.name!==n.props.bodyView&&n.props.handleScreenSwitch("transactions")},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"navBarButtons"},a.a.createElement("button",{type:"button",name:"portfolio",onClick:this.handleClick},"Portfolio"),a.a.createElement("button",{type:"button",name:"transactions",onClick:this.handleClick},"Transactions"))}}]),t}(a.a.PureComponent),T=Object(m.b)((function(e){return{bodyView:e.bodyView}}),(function(e){return{handleScreenSwitch:function(t){return e(function(e){return{type:"HANDLE_SCREEN_SWITCH",payload:e}}(t))}}}))(U),P=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return a.a.createElement(T,null)}}]),t}(r.Component),_=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return a.a.createElement("div",null,0===Object.keys(this.props.currentUser).length?null:a.a.createElement(P,null),a.a.createElement(A,null))}}]),t}(r.Component),I=Object(m.b)((function(e){return{currentUser:e.currentUser}}),null)(_),N=n(11),V=n(19),F={currentUser:{},bodyView:"default",portfolioStocks:{},portfolioPrice:0};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var L=n(18),x=Object(N.d)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_USER":return Object(b.a)({},e,{currentUser:t.payload,bodyView:"portfolio"});case"FILL_PORTFOLIO_STOCKS":return Object(b.a)({},e,{},t.payload);case"ADD_STOCK_TO_USER":return Object(b.a)({},e,{currentUser:Object(b.a)({},e.currentUser,{money_amount:t.payload.newUserMoneyAmount,stocks:[].concat(Object(V.a)(e.currentUser.stocks),[t.payload.newStock])})});case"HANDLE_SCREEN_SWITCH":return Object(b.a)({},e,{bodyView:t.payload});default:return e}}),Object(N.c)(Object(N.a)(L.a)));c.a.render(a.a.createElement(m.a,{store:x},a.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[20,1,2]]]);
//# sourceMappingURL=main.fc74c7bb.chunk.js.map